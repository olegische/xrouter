# Документация по аутентификации API

## Способы аутентификации

### Access Token

Для API-интерфейсов, требующих аутентификации, необходимо одновременно предоставить следующие два заголовка запроса для аутентификации по Access Token:

1. **Поле `Authorization` в заголовке запроса**

    Разместите Access Token в поле `Authorization` заголовка HTTP-запроса в следующем формате:

    ```
    Authorization: <your_access_token>
    ```

    Где `<your_access_token>` нужно заменить на фактическое значение Access Token.

2. **Поле `New-Api-User` в заголовке запроса**

    Разместите ID пользователя в поле `New-Api-User` заголовка HTTP-запроса в следующем формате:

    ```
    New-Api-User: <your_user_id>
    ```

    Где `<your_user_id>` нужно заменить на фактический ID пользователя.

**Примечание:**

*   **Необходимо одновременно предоставить оба заголовка запроса `Authorization` и `New-Api-User` для прохождения аутентификации.**
*   Если предоставлен только один из заголовков или не предоставлен ни один из них, будет возвращена ошибка `401 Unauthorized`.
*   Если Access Token в поле `Authorization` недействителен, будет возвращена ошибка `401 Unauthorized` с сообщением "Нет прав для выполнения этой операции, access token недействителен".
*   Если ID пользователя в поле `New-Api-User` не соответствует Access Token, будет возвращена ошибка `401 Unauthorized` с сообщением "Нет прав для выполнения этой операции, не соответствует авторизованному пользователю, пожалуйста, войдите снова".
*   Если заголовок `New-Api-User` не предоставлен, будет возвращена ошибка `401 Unauthorized` с сообщением "Нет прав для выполнения этой операции, не предоставлен New-Api-User".
*   Если формат заголовка `New-Api-User` неверен, будет возвращена ошибка `401 Unauthorized` с сообщением "Нет прав для выполнения этой операции, неверный формат New-Api-User".
*   Если пользователь заблокирован, будет возвращена ошибка `403 Forbidden` с сообщением "Пользователь заблокирован".
*   Если у пользователя недостаточно прав, будет возвращена ошибка `403 Forbidden` с сообщением "Нет прав для выполнения этой операции, недостаточно прав".
*   Если информация о пользователе недействительна, будет возвращена ошибка `403 Forbidden` с сообщением "Нет прав для выполнения этой операции, информация о пользователе недействительна".

## Пример Curl

Предположим, что ваш Access Token - `access_token`, ID пользователя - `123`, а API-интерфейс, к которому вы хотите получить доступ - `/api/user/self`, тогда вы можете использовать следующую команду curl:

```bash
curl -X GET \
  -H "Authorization: access_token" \
  -H "New-Api-User: 123" \
  https://your-domain.com/api/user/self
```

Пожалуйста, замените `access_token`, `123` и `https://your-domain.com` на фактические значения.
